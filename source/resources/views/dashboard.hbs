<div class="container mt-5">
  <h2 class="mb-4 text-primary">üéõÔ∏è B·∫£ng qu·∫£n tr·ªã</h2>
  <h4>ü•ò Danh s√°ch b√†i vi·∫øt:</h4>
  <ul class="list-group mb-4">
    {{#each dishes}}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        <strong>{{this.name}}</strong> ‚Äî ƒêƒÉng b·ªüi: {{this.userId.username}}
          ({{#ifEquals this.userId.role 'admin'}}Admin{{else}}Th√†nh vi√™n{{/ifEquals}})
      </div>
      <div>
        <a href="/dishes/{{this._id}}/edit" class="btn btn-sm btn-warning me-2">Ch·ªânh s·ª≠a</a>
        <form action="/admin/{{this._id}}?_method=DELETE" method="POST" class="d-inline">
          <button type="submit" class="btn btn-sm btn-danger">Xo√°</button>
        </form>
      </div>
    </li>
  {{/each}}
  </ul>

  <h2 class="mt-5">Qu·∫£n l√Ω ng∆∞·ªùi d√πng</h2>
  <div class="table-responsive">
    <table class="table table-striped text-center align-middle">
      <thead>
        <tr>
          <th>T√™n ng∆∞·ªùi d√πng</th>
          <th>Email</th>
          <th>Vai tr√≤</th>
          <th>Tr·∫°ng th√°i</th>
          <th>H√†nh ƒë·ªông</th>
        </tr>
      </thead>
      <tbody>
        {{#each users}}
          <tr>
            <td >{{this.username}}</td>
            <td>{{this.email}}</td>
            <td>
              {{#ifEquals this.role "admin"}}
                <span class="badge bg-danger" style="font-size: 13px; padding: 12px 33px;">Admin</span>
              {{else}}
                <span class="badge bg-primary" style="font-size: 13px; padding: 12px 20px;">Th√†nh vi√™n</span>
              {{/ifEquals}}
            </td>
            <td>
              {{#if this.isLocked}}
                <span class="badge bg-danger" style="font-size: 13px; padding: 12px 20px">ƒê√£ kho√°</span>
              {{else}}
                <span class="badge bg-success" style="font-size: 13px; padding: 12px 20px">ƒêang ho·∫°t ƒë·ªông</span>
              {{/if}}
            </td>
            <td>
              <form action="/admin/user/lock/{{this._id}}" method="POST" class="d-inline">
                <button type="submit" class="btn btn-sm {{#if this.isLocked}}btn-success{{else}}btn-warning{{/if}}">
                  {{#if this.isLocked}}
                    <i class="fa-solid fa-unlock"></i> M·ªü kho√°
                  {{else}}
                    <i class="fa-solid fa-lock"></i> Kho√°
                  {{/if}}
                </button>
              </form>
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      {{#if message}}
        Swal.fire({
          icon: '{{message.type}}',
          title: '{{#ifEquals message.type "error"}}L·ªói{{else}}Th√¥ng b√°o{{/ifEquals}}',
          text: '{{message.text}}',
          confirmButtonText: 'ƒê·ªìng √Ω'
        });
      {{/if}}
    });
  </script>


</div>

